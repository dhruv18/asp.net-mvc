<customErrors mode="On"> => web.config //for client side error show

@: => for html code inside the razor view;

html.Hiddenfor(model => model.Id) // for hidding the id in the front

TryUpdateModel()  ==> update the model

prop => variable with getters and setters (SortCut)

var model = new modelname();//accesing the Model in Controller. and passing this variable in to controller.return view(variableNameofModel)

//RouteConfig.cs
creating default route->

routes.maproute("routesName-abc",
        "urlthatmatchthisroute"-abc/{name},
        new { conroller = "nameofcontroller",action = "name",name=""});
        
actionresult Search(string name)
{
var message = server.htmlencode(name);
return content(message);
}

 //redirecting in controller
 return RedirectToAction("Incex","home");
 return redirecttoaction("index","home",new {name=name});
 //to route
 return redirectToRoute("default",new {conroller ="",action="" });
 //to file
 return file(Server.mappath("~/content/site.css"),"text/css");
 return json(new {message=message,name="scoot"},jsonrequestbehavior.allowget);  //retrun json result
 
 //Attributes
 [Authorize(Roles="admin")]//user should loged in and have to admin role to access the particular mehod
 [Authorize]//also appiled to controller
  
  //custome filters
  add class in filters folder and acces it in controller [nameoffilters]
  
 => Razor View
  //not html.encoded in view can run harmfull scripts
  html.raw();
  
  var firstrow = model.first();
  @firstrow......any filled we can print form the model result filrst item
  
  @: //for display the html inside c# code in  @{}
  
  Layout = null;//inside the viewpage at @{}
  
  @RenderSection("Abc",required:true)//inside the _layout.html for display.implement inside view
  @section featured{
  abcd} 
  
  @html.actionlink("nametodisplay",actionname,controllername)
  
  //edit post
  var review = sql select  query
  if(tryupdatemdel(review)){
  sql edit query
  return view(Index)
 }
 
 //partila view
 @html.Partial("_nameofpartialview",itemoranymodel)
  
  //html.Action
  @html.Action("nameofActionincontroller","controllername")
  in controller 
  public actionresult nameofActionInControler{
  return PartialView("_partialViewName",modelorAny());
}

//Attributes
[ChildActionOnly]->prevent direct access of controller method from browser


///Entity Framework-----------
//dispose method in controller to clean up the resources that canbe open  the dbcontext
ex:if(_db != null){
_db.Dispose();
}
base.Dispose(disposing);
}
    
//ServerName :- in Mocrosoft Sql Seerver Name:-(Localdb)\v11.0 
class with tabel filled
main class will be :- public class abac:DbContext{ public DbSet<classname> namefortabel {get;set;}

public constructorofdbcontexclass() : base("name=DefaultConnection"){}//write connection in web.config for database connection

//DataMigration-----------Creating schema automatically
install in package manager console
Enable-Migrations -ContextTypeName nameofclasshavingDbContextHerited
//will create migrations folder adn configuration.cs inside
p o v seed(){}//use to execute the database with some initial data inside tabel and run every time we update the database
//for updating database in pakcage manager console => Update-Database -Verbose  

//Linq-----------------
var query = from  r in _db.Restaurants
                where r.Cuntry == "USA"
                orderby r.Name
                select r;
 or
 var query = _db.Restaurants
                .where(r => r.country == "USA")
                .OrderBy(r => r.Name)
                .Skip(10)//fore Pagging
                .Take(10);//fore Paging
and
var query = from  r in _db.Restaurants
                orderby r.Revies.Averae(review => review.Rating)descending
                select new classnamewithit'sfillds
                {
                Id = r.Id,
                Name = r.Name,
                City = r.city;
                };//it will store the query result in class filleds
 or
 var query = _db.Restaurants
                .OrderBydecending(r => r.Reviews.Average(review => review.Rating
                .Take(10)
                .select(r => new ResaurantListViewModel
                {
                Id = r.Id,
                Name = r.Name,
                City = r.city;
                };//it will store the query result in class filleds

//for Filtering the search
.where(r=>searchtearm ==null || r.Name.StartsWith(Searchtearminparameterofaction))//for finding records that start with any latter
in view use <form method=get> and use the input type=search and name of inputtype should match with the controller action parametername..

//htmlActionlink With controllername
@html.ActionLink("nametoshow","actionName","controllername",new{id=item.Id},null)

//to show details of item 
//in details action in controller
public actionresult detailsl(int id){
Resaurant restaurant = db.Restaurants.Find(id);//Find will search in tabel with perticular id and display details if available
retrun view(restaurant)
}

//in controller if(ModelState.IsValid) -> used for cheking all the data in post method are containing the valid info

//in Edit
_db.Entry(review).state = EntityState.Modified;

//OverPosting Or Mass assignment
passing values to controller using query string --
so, to solve use the bind in controller action method..
public actionresult edit([Bind(Exclude="nameofyourfilledtonotgetusingqerystringorany..")] )

//in model validation to pass the null value of nay field
[DisplayFormat(NullDisplayText="annonymous")]


//Validation in Model
Automatic migration was not applied because it would result in data loss.
to solve this agin run command => update-database -verbose -Force

//disable the scripts and css files to be display in browser view source.
  which are bind using the bundel file=> go to web.config and make <compilation debug="False">
  
//Ajax for serach without refrecing the Page
@using (Ajax.BeginForm(
        new AjaxOptions
        {
        httpMethod ="get",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "restaurednList" //for section of page in div which will refreace after succcesfull ajax form
        }))
        {
        <input type="search" name ="searchTerm">
        <input type = "submit" value ="search by Name">
        }
/in controller write this for ajax form submmit 
 if(Request.IsAjaxRequest())
 {
 return PartialView("_abc",model);
 }
 
OR //Without ajax.beginform we can use the javascript code of over own
<form method="get" action="@Url.Action("Index")"
                data-otf-ajax="true" data-otf-target="#restaurednList">
    <input type="search" name="searchTerm">
    <input type="submit" value = "search by Name">
</form>
/Now create the new otf.js file for all js code in project
        file will be in the folder


//AutoCompete in searchbox shows
 public ActionResult Autocomplete(string term)
        {
            var model =
                _db.Restaurants
                   .Where(r => r.Name.StartsWith(term))
                   .Take(10)
                   .Select(r => new
                   {
                       label = r.Name
                   });
            return Json(model, JsonRequestBehavior.AllowGet);
        }
<input type="search" name="searchTerm" data-otf-autocomplete="@Url.Action("Autocomplete")">


2//Paging 
search in nuget and install in online search Pagelist and install pagelist.mvc
using PageList;
public ActionResult Index(string searchTerm = null, int page = 1)
var model =
                _db.Restaurants
                   .OrderByDescending(r => r.Reviews.Average(review => review.Rating))
                   .Where(r => searchTerm == null || r.Name.StartsWith(searchTerm))
                   .Select(r => new RestaurantListViewModel
                            {
                                Id = r.Id,
                                Name = r.Name,
                                City = r.City,
                                Country = r.Country,
                                CountOfReviews = r.Reviews.Count()
                            }).ToPagedList(page, 10);
/Now edit the reference page @model to
@model IPagedList<OdeToFood.Models.Restauran>
Or to Add the defaultNameSpace we can do in web.config inside View
      Add Namespace
      <add namespace = "PagedList"  />
      <add namespace = "OdeToFood.Models" />
      //required visual studio to close for effect
//Add this in view for pageing
 <div class="pagedList" data-otf-target="#restaurantList">
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page }),
        PagedListRenderOptions.MinimalWithItemCountText)
    </div>
 
 
///Paging Pacakge will install PagedList.css in themes folder so refrence it in bundelfile for css effect

//Now to Make paging async we can do it with taking the referecne of body content
  from the _layot page <section class="main-content">  /and this contetn never destroy it's always on the page
  so we can get it using  $(".main-content").on("click", ".pagedList a", getPage);
  
//Add filter [RequireHttps] in login action in account controller for htttps requests. so  it makes
        UserName and Password Encrypted throw netwrok so browser debugger can not find data
        In Network tab in Request body;

//Add filter [Authorize] in any action (or holeController) in controller so that it's action does not execute without user Login.
        so user should login to access that action in controller.
        This filter works throws Web.config in <authentication mode="forms>
                                                <forms loginUrl="~/Account/Login" timeout="2880" />
                                                </authentication>
        [AllowAnonymous] will allow acces without login inside [authorize].
        [Authorize(Roles="administrators,sales")] //will allow        

//Add the users Roles Using MembershipAPI(SimpleMembershipProvider)
        we can add Roles using Migration inside seedMethod
        make private function and call using inside seedmethod
        Now in function (){
        WebSecurity.InitializeDatabaseConnection("DefaultConnection",
        "UserProfile", "UserId", "UserName", autoCreateTables: true);
        
         var roles = (SimpleRoleProvider)Roles.Provider;
         var membership = (SimpleMembershipProvider)Membership.Provider;

            if (!roles.RoleExists("Admin"))
            {//check if role Admin is present if not then create that role
                roles.CreateRole("Admin");
            }
            if (membership.GetUser("sallen", false) == null)
            {//chek is there user is sallen if not create that user and it's passwrod
                membership.CreateUserAndAccount("sallen", "imalittleteapot");
            }
            if (!roles.GetRolesForUser("sallen").Contains("Admin"))
            {//chcke is sallen in admin role if not add it in admin role
                roles.AddUsersToRoles(new[] { "sallen" }, new[] { "admin" });
            } 
         }------------------------------------------------
         Now Update he data-base in console
         update-database -verbose //will show error role Manager feature has not been enabled.
         //to Solve above error add code in web.config inside <system.web>
         <roleManager enabled="true" defaultProvider="simple">
         <providers>
         <clear/>
         <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider,  
                                 WebMatrix.WebData"/>
         </providers>
         </roleManager>
         <membership defaultProvider="simple">
         <providers>
          <clear />
         <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider,                               WebMatrix.WebData" />
         </providers>
         </membership>
         ------------------------------------------------------------
         now update-databse -verbose //will run without error
         //now for displaying perticular link in view only if user is in admin role to do it
         @if(User.IsInRole("admin)){
                @Html.ActionLink("Create New","Create")
                }
                
                
// Attack Cross site request forgery(CSRF)
        to do :- create new project
                add new html page
                add contetn of html page from the site page we want to acces(Ex:- copy contetn of registration page of site from brows inspect copy all form elements and past in over html form body.
                add the full form contetn in over html body from the  target site form which is going to submitt
                Now in over html page form change the action to...
                <form action="url of target site (registrationpage)" method="post">
                Now to make form submmited automatically without button we can do that with script..
                <script> setTimeout(function () {  window.theform.submit(); },2000); </script>
                Now run the htm page ....which will redirect us to login page becouse we are not loggin to target site..
                so, to submit over form we can do with copy over link from browser...
                and make some hyperlink or any Image will run this page using <a> tag...
                and make something that target sites admin will click over image or any things from spam mail or any image clik
                so, haker's html page will run throw target site admin and it will automatically submit over page with all the registration details...
                so, now we have success full submit over data to database without it's access..

Now to prevent this attack := do that using that only target site's original form only submmited not any other malecius form wich is outside the target site...
                              TO prevent in Asp.net where the form post is submiited we can add in filter in that method
                              [ValidateAntiForgeryToken] //it will only alow form with aouth token generated from original form
                              To generate auoth toke in order to work with this  [ValidateAntiForgeryToken] filter we need to add
                              @html.AntiForgeryToken() in  view page wher form is submiited 
-----------------------------------------------------------------------------------------------------------------------------------

//OpenId and OAuth
OpenId:http://openid.net
OAuth:http://oauth.net

DotNetOpenAuth:
www.dotnetopenauth.net/
source:github.com/DotNetOpenAuth

to use OpenId an OAuth
it will allow user to login using google or facebook or twitter
to use go to App_Start/authConfig.cs
inside that all the code are comment because before using facbook or twitter we need to register the webstie to facebook or twiiter ..
But, google can provide without Registration
uncomment OAuthWebSecurity.RegisterGoogleClient();

        
